МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
 
 
КАФЕДРА ПРОГРАМНОЇ ІНЖЕНЕРІЇ
 


 
 
Звіт
з лабораторної роботи № 3 
з дисципліни Аналіз та рефакторинг коду
  
 
 


 
Виконала:                                                                     Перевірив:
ст. гр. ПЗПІ-23-5                                                          ​​​​ст. викладач кафедри ПІ
Буткевич Анна                                                             Сокорчук Ігор Петрович
 
 
 Харків 2025
1 ІСТОРІЯ ЗМІН


№
	Дата
	Версія звіту
	Опис змін та виправлень
	1
	23.12.2025
	0.1
	Створено розділ «Завдання»
	2
	23.12.2025
	0.1
	Створено розділ «Опис Виконаної роботи»
	



2 ЗАВДАННЯ
На лабораторній роботі №3 потрібно розробити бізнес-логику та функції адміністрування серверної частини  програмної системи 
Завдання:
1. Розробити бізнес логіку серверної частини програмної системи.
2. Розробити функції адміністрування серверної частини програмної системи.
3. Створити програмну реалізацію бізнес логіки та функцій адміністрування серверної частини.
4. Перевірити роботу серверної частини системи.




3 ОПИС ВИКОНАНОЇ РОБОТИ
У межах лабораторної роботи №3 було розроблено бізнес-логіку та функції адміністрування серверної частини програмної системи моніторингу показників. Реалізована серверна логіка забезпечує прийом вимірювальних даних, виконання математичної обробки показників, збереження результатів у базі даних, а також надання адміністративних інтерфейсів для запуску обчислень, аналізу результатів та аудиту дій.


3.1 Моделі даних та структура бази даних


Для підтримки бізнес-логіки серверної частини було розроблено та розширено схему бази даних.
create_tables.sql — SQL-скрипт створення основних таблиць:
users, devices, locations, sensor_readings, alerts, subscriptions, audit_logs, computed_readings, device_health, а також відповідних індексів і зовнішніх ключів.
* ComputedReading — модель для збереження результатів аналітичних обчислень над вимірювальними даними у структурованому вигляді (JSON).
* DeviceHealth — модель для збереження агрегованих метрик працездатності джерел даних.
* AuditLog — модель для фіксації адміністративних і системних дій.


Структура бази даних дозволяє розділити первинні вимірювання та результати аналітичної обробки, що спрощує подальший аналіз і масштабування системи.


3.2 Реалізація бізнес-логіки (математична обробка даних)


Основна бізнес-логіка реалізована у вигляді окремого сервісу ComputeService.js, який інкапсулює математичні алгоритми аналізу вимірювальних даних.


3.2.1 Обчислення кумулятивного показника


Метод computeCumulativeDose(deviceId, from, to) реалізує чисельну інтеграцію методом трапецій між послідовними вимірюваннями за заданий часовий інтервал. Перед обчисленням виконується нормалізація одиниць виміру.
Результатом є сумарне накопичене значення показника за вибраний період.


3.2.2 Згладжування даних методом EWMA


Метод computeEWMA(deviceId, from, to, alpha) реалізує експоненційно зважене ковзне середнє. Застосування даного алгоритму дозволяє зменшити вплив випадкових коливань і виділити загальний тренд зміни показників.


3.2.3 Виявлення аномальних пікових значень


Метод detectPeaks(deviceId, from, to, clusterWindowMinutes) виконує статистичний аналіз даних для виявлення локальних піків.
Пікові значення визначаються на основі середнього значення та стандартного відхилення, після чого групуються у часові інтервали для зменшення кількості хибних спрацювань.


3.2.4 Прогнозування перевищення порогового значення


Метод predictTimeToThreshold(deviceId, threshold, from, to) використовує лінійну регресійну модель для прогнозування моменту часу, коли показник може перевищити заданий поріг.
Такий підхід дозволяє оцінювати потенційні ризики на основі наявної історії вимірювань.


3.2.5 Оцінка стану джерела даних


Метод computeDeviceHealth(deviceId) формує агреговані метрики активності джерела даних за останній часовий період, зокрема час останнього вимірювання та відсоток доступності.
Результати зберігаються у таблиці device_health для подальшого аналізу адміністраторами системи.


3.2.6 Виявлення небезпечних часових інтервалів


Метод detectExposureWindows(deviceId, from, to, threshold, maxHours) аналізує ковзні часові вікна та визначає інтервали, у яких накопичене значення показника перевищує допустимий поріг.


3.3 Адміністративні функції серверної частини


Для керування серверною логікою реалізовано набір адміністративних ендпойнтів:
запуск і повторне виконання обчислень бізнес-логіки;
перегляд результатів обчислень (computed_readings, device_health);
керування користувачами та джерелами даних;
аудит дій адміністраторів із збереженням записів у таблиці audit_logs.
Усі адміністративні операції виконуються з урахуванням ролей доступу.


3.4 Перевірка роботи серверної частини


Перевірка роботи серверної частини виконувалася шляхом ручного та автоматизованого надсилання тестових вимірювальних даних через API, запуску обчислювальних методів та аналізу результатів у базі даних.
Було підтверджено коректну роботу математичних алгоритмів, збереження обчислених метрик та функціонування адміністративних ендпойнтів.


3.5 UML-діаграми серверної частини програмної системи
3.5.1 UML діаграма діяльності «Обробка показників сенсорів серверною частиною»


Дана UML діаграма діяльності описує послідовність дій серверної частини системи під час обробки вхідних показників сенсорів. Процес починається з отримання HTTP-запиту типу POST /api/readings, після чого виконується валідація вхідних даних (перевірка структури, типів та обов’язкових полів).
У разі, якщо дані є валідними, показники зберігаються у таблиці sensor_readings бази даних. Далі виконується нормалізація одиниць вимірювання для приведення значень до єдиного формату, що забезпечує коректність подальших обчислень. Після цього сервер перевіряє значення на перевищення визначених порогів. Якщо порогове значення перевищено, створюється відповідний запис у таблиці alerts, інакше обробка продовжується без генерації сповіщення.


Після завершення обробки формується успішна відповідь із кодом HTTP 200 OK. Якщо ж на етапі валідації виявлено помилки, сервер формує повідомлення про помилку та повертає відповідь HTTP 400 Bad Request, після чого процес завершується. UML діаграма діяльності «Обробка показників сенсорів серверною частиною» (рисунок Б.1).


3.5.2 UML діаграма діяльності «Адміністративні функції серверної частини»


Дана діаграма діяльності відображає логіку виконання адміністративних операцій серверною частиною системи. Процес починається з отримання адміністративного запиту до захищеного ендпойнту. Першим етапом є перевірка JWT-токена, що забезпечує автентифікацію користувача.
Якщо токен є невалідним або відсутнім, сервер негайно повертає відповідь HTTP 401 Unauthorized. У разі успішної перевірки токена визначається роль користувача. Якщо користувач не має ролі адміністратора, доступ до функцій блокується з поверненням відповіді HTTP 403 Forbidden.
У випадку, якщо користувач має роль admin, сервер виконує відповідну адміністративну дію (запуск обчислень, перегляд агрегованих даних тощо), після чого фіксує виконану дію у журналі аудиту audit_logs. Завершальним етапом є формування успішної відповіді HTTP 200 OK. UML діаграма діяльності «Адміністративні функції серверної частини» (рисунок Б.2).


3.5.3 UML діаграма діяльності «Виконання бізнес-логіки обчислень»


Ця UML діаграма діяльності демонструє виконання бізнес-логіки обчислень у серверній частині системи. Після отримання запиту на виконання обчислень сервер завантажує відповідні вимірювання з бази даних.
Подальші обчислення виконуються паралельно, що відображено за допомогою вузла розгалуження (fork). Серед виконуваних операцій: обчислення кумулятивної дози, експоненційно зваженого ковзного середнього (EWMA), виявлення пікових значень, прогнозування моменту досягнення порогового значення, а також оцінка загального стану пристрою.
Після завершення всіх паралельних обчислень результати агрегуються та зберігаються у таблиці computed_readings. Процес завершується поверненням результату клієнту. UML діаграма діяльності «Виконання бізнес-логіки обчислень» (рисунок Б.3).


3.5.4 UML діаграма взаємодії «Прийом та обробка даних»


Діаграма взаємодії ілюструє обмін повідомленнями між основними компонентами серверної частини під час прийому показників. Клієнт надсилає HTTP-запит POST /api/readings до API-контролера. Контролер передає запит до сервісного шару, де виконується валідація та основна обробка даних.
Сервісний шар зберігає отримані дані у базі даних та ініціює перевірку порогових значень через сервіс сповіщень. У разі необхідності створюється запис про сповіщення в базі даних. Після завершення обробки API-контролер повертає клієнту відповідь з кодом HTTP 200 OK. UML діаграма взаємодії «Прийом та обробка даних» (рисунок Б.4).


3.5.5 UML діаграма взаємодії «Адміністративний запуск обчислень»


Дана діаграма взаємодії описує процес ініціації обчислень адміністратором. Адміністратор надсилає запит до адміністративного API, який перевіряє JWT-токен та роль користувача. Після успішної авторизації запит передається до сервісу обчислень ComputeService.
Сервіс обчислень зчитує необхідні дані з бази даних, виконує бізнес-логіку та зберігає результати обчислень. Паралельно інформація про виконану адміністративну дію фіксується у журналі аудиту audit_logs. Після завершення операції адміністратор отримує результат виконання запиту. UML діаграма взаємодії «Адміністративний запуск обчислень» (рисунок Б.5).
4 ВИСНОВКИ
У результаті виконання лабораторної роботи №3 було розроблено бізнес-логіку та адміністративні функції серверної частини програмної системи. Реалізовано комплекс математичних алгоритмів для аналізу вимірювальних даних, включаючи інтеграцію, згладжування, статистичну детекцію аномалій та прогнозування.
Запропонована архітектура з виділенням бізнес-логіки в окремий сервіс забезпечує модульність, масштабованість та зручність подальшого тестування. Реалізовані адміністративні інструменти дозволяють контролювати виконання обчислень і забезпечують прозорість роботи системи.
Отримані результати підтверджують відповідність реалізованої серверної частини вимогам лабораторної роботи та створюють основу для подальшого розширення системи у наступних лабораторних роботах.




ДОДАТОК А
Відеозапис
Відеозапис презентації результатів лабораторної роботи: 
https://youtu.be/jQqywDrg56Q


Хронологічний опис відеозапису:
00:05 - Опис архітектури серверної частини
00:30 - UML-діаграми
04:56 - Функції адміністрування серверної частини в коді
06:42 - Бізнес-логіка в коді
10:00 - Тестування


ДОДАТОК Б  
Рисунок Б.1 - UML діаграма діяльності «Обробка показників сенсорів серверною частиною»
  

Рисунок Б.2 - UML діаграма діяльності «Адміністративні функції серверної частини»


  

Рисунок Б.3 - UML діаграма діяльності «Виконання бізнес-логіки обчислень»


  

Рисунок Б.4 - UML діаграма взаємодії «Прийом та обробка даних»


  

Рисунок Б.5 - UML діаграма взаємодії «Адміністративний запуск обчислень»
ДОДАТОК В
Посилання на код: 
https://github.com/NureButkevychAnna/ark-pzpi-23-5-butkevych-anna/tree/main/Lab3/ark-pzpi-23-5-butkevych-anna-lab3/RadiationMonitoring