МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
 
 
КАФЕДРА ПРОГРАМНОЇ ІНЖЕНЕРІЇ
 


 
 
Звіт
з практичної роботи № 2 
з дисципліни Аналіз та рефакторинг коду
  
 
 


 
Виконала:                                                                     Перевірив:
ст. гр. ПЗПІ-23-5                                                          ​​​​ст. викладач кафедри ПІ
Буткевич Анна                                                             Сокорчук Ігор Петрович
 
 
 Харків 2025
1 МЕТА
Метою цієї роботи є дослідження та практичне застосування методів рефакторингу коду програмного забезпечення на мові програмування Go. Рефакторинг є важливим етапом життєвого циклу розробки, оскільки він дозволяє покращити структуру коду без зміни його зовнішньої поведінки. Завдяки цьому код стає більш зрозумілим, легшим у підтримці та розширенні. У роботі розглянуто три поширені методи рефакторингу — Pull Up Field, Pull Up Method і Replace Temp with Query, які дозволяють усунути дублювання, покращити читабельність та підвищити рівень абстракції в програмному коді. Застосування цих технік у мові Go показує, як за допомогою простих і зрозумілих засобів можна досягти якісного вдосконалення програмної архітектури.


2 ОПИС ВИКОНАНОЇ РОБОТИ
У ході роботи було проведено детальний аналіз та практичну реалізацію трьох методів рефакторингу коду: Pull Up Field, Pull Up Method і Replace Temp with Query. Кожен метод розглядався окремо, з поясненням його суті, переваг, а також демонстрацією прикладів до і після застосування на мові Go.
Pull Up Field
Суть методу полягає в перенесенні спільного поля з дочірніх структур у батьківську. Такий підхід дозволяє уникнути дублювання та зберегти узгодженість даних. Проблема, яку вирішує цей метод, полягає в тому, що підкласи часто розвиваються незалежно один від одного, унаслідок чого в них з’являються однакові або майже однакові поля. Це ускладнює підтримку коду, адже зміни доводиться вносити у кілька місць одночасно.
До рефакторингу код мав дубльоване поле Name у двох структурах — Developer і Manager:


1        type Developer struct {
2                 Name string
3                 Language string
4         }
5
6         type Manager struct {
7                  Name string
8                 TeamSize int
9          }


Після застосування методу Pull Up Field спільне поле Name було винесено у базову структуру Employee, яку наслідують обидві інші структури:


1         type Employee struct {
2                 Name string
3         }
4
5         type Developer struct {
6                 Employee
7                 Language string
8         }
9
10         type Manager struct {
11                 Employee
12                 TeamSize int
13        }


У результаті поле з’являється лише в одному місці, що зменшує дублювання і спрощує внесення змін. Якщо тепер знадобиться додати спільне поле для всіх типів працівників, достатньо зробити це у структурі Employee. Такий підхід покращує читабельність, узгодженість і гнучкість коду, дозволяючи легше впроваджувати майбутні зміни в архітектурі програми.


Pull Up Method
Метод Pull Up Method полягає у перенесенні спільного методу з підкласів у суперклас. Він використовується тоді, коли кілька структур мають однакову поведінку, реалізовану окремо, але з ідентичною логікою. Така ситуація часто виникає, коли підкласи розвиваються незалежно, унаслідок чого в них з’являються дублікати методів. Це ускладнює підтримку та може призвести до помилок, якщо зміни буде внесено лише в одну копію методу.


До рефакторингу метод GetName() дублювався у двох структурах:


1         type Developer struct {
2                 Name string
3         }
4
5         func (d Developer) GetName() string {
6                 return d.Name
7         }
8
9         type Manager struct {
10                 Name string
11         }
12
13         func (m Manager) GetName() string {
14                 return m.Name
15         }


Після рефакторингу метод було винесено у батьківську структуру Employee:


1         type Employee struct {
2                 Name string
3         }
4
5         func (e Employee) GetName() string {
6                 return e.Name
7        }
8
9         type Developer struct {
10                 Employee
11         }
12
13         type Manager struct {
14                 Employee
15         }


Таким чином, метод GetName() існує лише в одному місці, а обидві структури (Developer і Manager) можуть його використовувати завдяки композиції. Це не лише зменшує дублювання, але й робить код більш узгодженим. Якщо згодом потрібно буде змінити реалізацію методу, достатньо відредагувати його у базовій структурі. Метод Pull Up Method особливо корисний у великих проектах, де кілька об’єктів поділяють спільну логіку, але реалізовану у різних класах чи структурах.


Replace Temp with Query
Метод Replace Temp with Query передбачає заміну тимчасової змінної окремою функцією або методом. Його мета — підвищення читабельності коду, уникнення надлишкових змінних та спрощення логіки обчислень. Тимчасові змінні часто роблять код важчим для розуміння, особливо якщо вони використовуються кілька разів у різних частинах методу. Винесення виразу в окрему функцію робить код чистішим і дозволяє повторно використовувати логіку в інших частинах програми.


До рефакторингу код виглядав так:


1         func (o Order) TotalPrice() float64 {
2                 base := float64(o.Quantity) * o.UnitPrice
3                 if base > 1000 {
4                         return base * 0.9
5                 }
6                 return base
7         }


Тут змінна base зберігала проміжне значення, яке можна було обчислювати безпосередньо. Після застосування методу Replace Temp with Query обчислення було винесено у новий метод BasePrice():


1         func (o Order) BasePrice() float64 {
2                 return float64(o.Quantity) * o.UnitPrice
3         }
4
5         func (o Order) TotalPrice() float64 {
6                 if o.BasePrice() > 1000 {
7                         return o.BasePrice() * 0.9
8         }
9         return o.BasePrice()
10         }


У результаті код став набагато зрозумілішим: логіка обчислення базової ціни відокремлена в окремий метод, який можна легко протестувати чи змінити за потреби. Це також дозволяє використовувати метод BasePrice() в інших частинах програми без дублювання коду. Метод Replace Temp with Query допомагає зробити код коротшим, читабельним і більш гнучким для подальшого розвитку.


3 ВИСНОВКИ
Рефакторинг коду є невід’ємною частиною процесу розробки програмного забезпечення, адже дозволяє підтримувати якість, читабельність та гнучкість проєкту у довгостроковій перспективі. Використання таких методів, як Pull Up Field, Pull Up Method та Replace Temp with Query, демонструє, наскільки важливо усувати дублювання коду, підвищувати рівень абстракції та робити логіку програми більш зрозумілою. У мові програмування Go ці принципи реалізуються через прості й наочні конструкції, що сприяє створенню чистої та ефективної архітектури.
Методи Pull Up Field і Pull Up Method допомагають зосередити спільні властивості та поведінку у базових структурах, що зменшує повторення і полегшує подальше розширення коду. Replace Temp with Query, у свою чергу, сприяє покращенню структури функцій та підвищує рівень інкапсуляції, роблячи код більш гнучким і тестованим. Застосування цих технік сприяє формуванню зрозумілих залежностей між об’єктами та покращує архітектуру системи загалом.
Таким чином, рефакторинг не лише оптимізує технічну сторону коду, але й сприяє підвищенню продуктивності розробників, дозволяючи швидше орієнтуватися у проєкті, вносити зміни без ризику порушення логіки та підтримувати високу якість програмного забезпечення на всіх етапах його життєвого циклу.




4 ВИКОРИСТАНІ ДЖЕРЕЛА
1. Pull Up Field URL: https://refactoring.guru/pull-up-field
2. Pull Up Method URL: https://refactoring.guru/pull-up-method
3. Replace Temp with Query URL: https://refactoring.guru/replace-temp-with-query


Додаток А
Відеозапис


Відеозапис презентації результатів лабораторної роботи:
https://youtu.be/_0uTM7B9oKc


Хронологічний опис відеозапису:
00:05 - Вступ
00:16 - Pull Up Field
02:13 - Pull Up Method
04:54 - Replace Temp with Query
06:49 - Висновки
07:20 - Використані джерела
07:21 - Фінальний слайд


Додаток Б
Слайди презентації у вигляді рисунків
  

Рисунок Б.1 – Титульний лист
  

Рисунок Б.2 – Суть методу Pull Up Field




  

Рисунок Б.3 – Переваги Pull Up Field
  

Рисунок Б.4 – Як рефакторити Pull Up Field






  

Рисунок Б.5 – Приклад Pull Up Field
  

Рисунок Б.6 – Суть методу Pull Up Method






  

Рисунок Б.7 – Переваги Pull Up Method
  

Рисунок Б.8 – Як рефакторити Pull Up Method






  

Рисунок Б.9 – Приклад Pull Up Method
  

Рисунок Б.10 – Суть методу Replace Temp with Query






  

Рисунок Б.11 – Переваги Replace Temp with Query
  

Рисунок Б.12 – Як рефакторити Replace Temp with Query






  

Рисунок Б.13 – Висновки
  

Рисунок Б.14 – Використані джерела






  

Рисунок Б.15 – Фінальний слайд